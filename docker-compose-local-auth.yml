webtests:
  build: .
  ports:
    - "3000:3000"
  environment:
    PORT: 3000
    NODE_ENV: local
    AUTH_MODULE_KEY: ${AUTH_MODULE_KEY}
    AUTH_MODULE_SIG: ${AUTH_MODULE_SIG}
    AUTH_MODULE_EXPIRES: ${AUTH_MODULE_EXPIRES}
    API_END_POINT: http://platform:8080/api
  log_driver: json-file
  links:
    - platform
  command:
    npm run auth-testing

platform:
  image: quay.io/bionano/biouserplatform_service:dev
  environment:
    PGHOST: storage
  links:
    - storage
  log_driver: json-file
  command:
    npm run wait-n-server

storage:
  image: quay.io/bionano/biouserplatform_storage:dev
  environment:
    POSTGRES_PASSWORD: geScongThExtesGO
    POSTGRES_USER: postgres
  log_driver: json-file
